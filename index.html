<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f3f3f3;
            font-family: Arial, sans-serif;
        }
        #password {
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div>
        <button onclick="generatePassword()">Generate</button>
        <p id="password"></p>
    </div>

    <script>
    var words = [];
    var symbols = ["!", "@", "#", "$", "%", "&", "*", "(", ")", " ", ".", "-", "_"];
    var numbers = [0,1,2,3,4,5,6,7,8,9];

    // Fetch word list from the URL and store it in the words array
    fetch('/wordlist/words.txt')
       .then((response) => response.text())
       .then((text) => {
			words = text.split('\n').map(word => word.trim()); // Trimming each word
       });


    function getRandomElement(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }

    //randomises uppercase
    function randomUpperCase(password) {
       var words = password.split(/[^\w]/);

       for (var i = 0; i < words.length; i++) {
         var word = words[i];
         var randomIndex = Math.floor(Math.random() * word.length);
         words[i] = word.substring(0, randomIndex) + word[randomIndex].toUpperCase() + word.substring(randomIndex + 1);
       }

       return words.join('');
    }

    // generates random seperator to go between words to make dictionary attack more difficult
    // increase seperator length will be more secure but harder to remember
    function generateSeparator() {
        var separator = '';
        var numberOfSeparators = Math.round(Math.random()) + 1; // Always returns 1 or 2
        var symbolOrNumber = [symbols, numbers];

        for (var i = 0; i < numberOfSeparators; i++) {
            // Ensure we alternate between symbols and numbers
            var arr = symbolOrNumber[i % 2];
            separator += getRandomElement(arr);
	}

	return separator;
    }
    function generatePassword() {
        var word1 = getRandomElement(words);
        var word2 = getRandomElement(words);
        var word3 = getRandomElement(words);
        var separator1 = generateSeparator();
        var separator2 = generateSeparator();

	// Adjust to modify how the password is constructed
        var password = word1 + separator1 + word2 + separator2 + word3;

  	// If password length doesn't meet the criteria, regenerate
        if (password.length > 30 || password.length < 15) {
         	return generatePassword();
       	}

       	 password = randomUpperCase(password);
        
       	 document.getElementById("password").textContent = password;
    }
</script>
</body>
</html>
